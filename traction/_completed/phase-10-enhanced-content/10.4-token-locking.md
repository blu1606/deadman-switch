# 10.4 Token Locking

> Lock SOL/SPL tokens vào vault, tự động transfer cho recipient khi release.

## Goal
Vault không chỉ chứa data mà còn chứa tài sản:
- Lock 5 SOL
- Lock 1000 USDC
- Lock 1M BONK

Khi vault release → recipient có thể claim tất cả.

## Architecture
```
Vault PDA
    ├── locked_sol: u64 (in vault account)
    └── Token Escrow ATAs (separate accounts)
        ├── USDC ATA
        ├── BONK ATA
        └── ...
```

## Contract Changes

### New Fields in Vault
- `locked_sol: u64`

### New Instructions
1. **lock_sol(amount)** - Transfer SOL từ owner vào vault PDA
2. **lock_token(mint, amount)** - Transfer token vào escrow ATA
3. **claim_locked_sol()** - Recipient claim SOL sau khi release
4. **claim_locked_token(mint)** - Recipient claim token sau khi release

### Dependencies
- `anchor_spl` for SPL token operations
- ATA (Associated Token Account) for each token mint

## Limits
- Max token types per vault: 5
- Min lock: 0.001 SOL

## UI
- "Lock Assets" section trong Create Vault
- Hiển thị locked amounts trong Dashboard
- "Claim Assets" button cho recipient

## Security
- Chỉ owner lock được
- Chỉ claim được sau release
- Claim yêu cầu recipient signature
